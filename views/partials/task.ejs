<% var formattedDate=new Date(fe.ed2).toLocaleDateString('en-US', { weekday: 'short' , day: 'numeric' , month: 'short' ,
    year: 'numeric' }); %>
    <% var formattedDueDate=new Date(fe.ed).toLocaleDateString('en-US', { weekday: 'short' , day: 'numeric' ,
        month: 'short' , year: 'numeric' }); %>
        <div class="task-card">
            <div class="left-indicator" style="background-color: <%= fe.isOverdue ? '#dc3545' : '#ffc107' %>;">
            </div>
            <div class="task-header">
                <div class="task-title-section">
                    <h3 class="task-name">
                        <i class="fas fa-tasks"></i>
                        <%= fe.verb %>&nbsp;<%= fe.task %>
                    </h3>
                </div>
                <div class="task-actions">
                    <a href="/add?verb=<%= fe.verb %>&task=<%= fe.task %>" class="action-button done-button">
                        <i class="fas fa-check"></i>
                    </a>
                    <a href="/edit/<%= fe.id %>" class="action-button edit-button">
                        <i class="fas fa-edit"></i>
                    </a>
                    <a href="javascript:void(0);" class="action-button delete-button delete-entry"
                        data-verb="<%= fe.verb %>" data-task="<%= fe.task %>" data-latest-only="true"
                        title="Delete Latest">
                        <i class="fas fa-trash-alt"></i>
                    </a>
                    <a href="javascript:void(0);" class="action-button delete-button delete-entry"
                        data-verb="<%= fe.verb %>" data-task="<%= fe.task %>" data-latest-only="false"
                        title="Delete All" style="background-color: red; color: white;">
                        <i class="fas fa-trash"></i>
                    </a>
                </div>
            </div>
            <div class="task-footer">
                <div class="task-meta">
                    <span class="meta-item">
                        <i class="far fa-calendar-alt"></i>
                        Last: <%= formattedDate %>
                    </span>
                    <span class="meta-item">
                        <i class="fas fa-redo"></i>
                        Every <b>
                            <%= fe.frequency %>
                        </b> days
                    </span>
                </div>
                <div class="task-status">
                    <span class="status-badge <%= fe.isOverdue ? '' : 'due-soon' %>">
                        <i class="fas fa-<%= fe.isOverdue ? 'exclamation-circle' : 'clock' %>"></i>
                        <%= fe.isOverdue ? 'Overdue by ' + fe.overdueDays + ' days' : 'Due in ' + fe.dueInDays + ' days'
                            %>
                    </span>
                    <span class="due-date"
                        style="font-weight: bold; font-size: small;text-align: right; padding-right: 3px;">
                        <%= formattedDueDate %>
                    </span>
                </div>
            </div>
        </div>
        <script>
            document.addEventListener('DOMContentLoaded', function () {
                const deleteButtons = document.querySelectorAll('.delete-entry');

                deleteButtons.forEach(button => {
                    button.addEventListener('click', function () {
                        const verb = this.getAttribute('data-verb');
                        const task = this.getAttribute('data-task');
                        const latestOnly = this.getAttribute('data-latest-only') === 'true';
                        url = "/delete?v=" + (encodeURIComponent(verb)) + "&t=" + (encodeURIComponent(task)) + "&latestOnly=" + (latestOnly);
                        alert(url);

                        if (confirm(`Are you sure you want to delete ${latestOnly ? 'the latest' : 'all'} "${verb}       
${task}" ${latestOnly ? 'entry' : 'entries'}?`)) {
                            fetch(url, { method: 'GET' })
                                .then(response => {
                                    if (response.ok) {
                                        return response.text();
                                    }
                                    throw new Error('Network response was not ok.');
                                })
                                .then(data => {
                                    alert(data);
                                    location.reload(); // Reload the page to reflect the changes
                                })
                                .catch(error => {
                                    console.error('Error:', error);
                                    alert('An error occurred while trying to delete the entry. Please try again.');
                                });
                        }
                    });
                });
            });
        </script>